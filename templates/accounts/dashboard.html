{% extends 'base.html' %}
{% load static %}

{% block content %}
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />

<style>
/* Force white text in dark mode for cards inside main content */
body.dark-mode main .card,
body.dark-mode main .card * {
    color: #fff !important; /* white text in dark mode */
}

body.dark-mode main .card a {
    color: #ffd700 !important; /* optional: make links visible in dark mode */
}

/* Slightly darker card background in dark mode */
body.dark-mode main .card {
    background-color: #1e1e1e !important;
    border-color: #444 !important;
}

/* Hover effect for links in dark mode */
body.dark-mode main .card a:hover {
    color: #fff !important;
    text-decoration: underline;
}
/* ==================== PROFILE PICTURE ==================== */
.profile-img {
    width: 150px; /* larger for better visibility */
    height: 150px;
    border-radius: 50%; /* circular */
    object-fit: cover; /* keeps aspect ratio and fills circle */
    object-position: top;
    border: 4px solid #ffd700; /* golden border for highlight */
    box-shadow: 0 4px 15px rgba(0,0,0,0.3); /* subtle shadow */
    display: block;
    margin: 0 auto 20px auto; /* center above content */
}

/* ==================== CARD STYLING ==================== */
.card {
    border-radius: 1rem;
    transition: all 0.3s ease-in-out;
    background-color: #fff;
    color: #000 !important;
}

.card:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 25px rgba(0,0,0,0.15);
}

.card-header {
    border-bottom: none;
    font-weight: 600;
    background-color: #000;
    color: #fff !important;
    text-align: center;
}

/* ==================== DARK MODE ==================== */
body.dark-mode {
    background-color: #111;
    color: #fff;
}

body.dark-mode .card, body.dark-mode .card-header {
    background-color: #000 !important;
    color: #fff !important;
}

body.dark-mode main .card a {
    color: #ffd700 !important;
}

body.dark-mode main .card a:hover {
    color: #fff !important;
    text-decoration: underline;
}

</style>


<section class="section-conten padding-y bg">

    {% include 'includes/alerts.html' %}
    <div class="container">
        <div class="row">
            {% include 'includes/dashboard_sidebar.html' %}
            <main class="col-md-9">
                <article class="card">
                    <header class="card-header">
                        <strong class="d-inline-block mr-3">Logged in as: </strong>
                        <span>{{ user.full_name }}</span>
                    </header>
                    <div class="card-body">
                        <div class="row"> 
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="card-title">Total Orders</h5>
                                        <h4>{{ orders_count }}</h4>
                                        <a href="" style="color:#ffd700;">View Orders</a>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="card" style="text-align: center;">
                                    <div class="card-body">
                                        {% if user.userprofile.profile_picture %}
                                            <img src="{{ user.userprofile.profile_picture.url }}" 
                                                 alt="Profile picture" class="profile-img">
                                        {% else %}
                                            <img src="{% static 'images/default_profile.jpeg' %}" 
                                                 alt="Default profile picture" class="profile-img">
                                        {% endif %}

                                        <p class="mb-0">{{ user.email }}</p>
                                        <p>{{ user.phone_number }}</p>
                                    </div>
                                </div>
                            </div>
                        </div> <!-- row.// -->
                    </div> <!-- card-body .// -->
                </article> <!-- order-group.// --> 
            </main>
        </div> <!-- row.// -->
    </div>
</section>

{% endblock %}
